title: Multilevel Data Generator
name: datagen
jus: '3.0'
stage: 0
compilerMode: tame
events:
  update: './test.events::update'
children:

  - type: Label
    label: Dependent Variable
    style: list

    children:
      - type: LayoutBox
        style: inline
        stretchFactor: 1
        children:
            - type: TextBox
              name: dep
              format: string
              stretchFactor: 1
              margin: large
            - type: TextBox
              name: dep_n
              format: number
              stretchFactor: 0
              margin: large

  - type: Label
    label: Clustering Variables
    margin: large
    style: list
    stretchFactor: 1
    children:
      - type: LayoutBox
        style: inline
        stretchFactor: 1
        children:
          - type: ListBox
            name: clusters
            fullRowSelect: true
            addButton: Add a cluster variable
            height: large

            events:
                       listItemAdded: './test.events::onChange_clusters_added'
                       listItemRemoved: './test.events::onChange_clusters_removed'
            
            showColumnHeaders: true
            stretchFactor: 1
            columns:
              - name: var
                label: Name
                template:
                  type: TextBox
                stretchFactor: 1
              - name: opt1
                label: N clusters
                template:
                  type: TextBox
                stretchFactor: .5
                  
          - type: Label
            label: Clusters combo
            children:
              - name: clusters_comb_cross
                type: RadioButton
                optionName: clusters_comb
                optionPart: cross
              - name: clusters_comb_nested
                type: RadioButton
                optionName: clusters_comb
                optionPart: nested



  - type: Label
    label: Covariates
    margin: large
    stretchFactor: 1
    style: list
    children:
      - type: LayoutBox
        style: inline
        minWidth: 285
        children:
                  - type: ListBox
                    name: covs
                    addButton: Add  covariate variable
                    height: large

                    events:
                       listItemAdded: './test.events::onChange_covs_added'
                       listItemRemoved: './test.events::onChange_covs_removed'

                    showColumnHeaders: true
                    stretchFactor: 1

                    columns:
                      - name: var
                        label: Name
                        template:
                              type: TextBox


  - type: Label
    label: Factors
    margin: large
    stretchFactor: 1
    style: list
    children:
      - type: LayoutBox
        style: inline
        stretchFactor: 1
        
        children:
          - type: ListBox
            name: factors
            fullRowSelect: true
            height: large
            addButton: Add a factor variable
            events:
                       listItemAdded: './test.events::onChange_factors_added'
                       listItemRemoved: './test.events::onChange_factors_removed'
            
            showColumnHeaders: true
            stretchFactor: 1
            columns:
              - name: var
                label: Name
                stretchFactor: 1
                template:
                        type: TextBox
              - name: opt1
                label: K levels
                template:
                  type: TextBox
                stretchFactor: .5
                  
          - type: Label
            label: Factors combo
            children:
              - name: factors_comb_cross
                type: RadioButton
                optionName: factors_comb
                optionPart: cross
              - name: factors_comb_random
                type: RadioButton
                optionName: factors_comb
                optionPart: random


  - type: CollapseBox
    label: Structure
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        style: list
        stretchFactor: 1
        children:
          - type: Label
            name: note
            label: Specify here variables that vary only between a cluster
          - type: LayoutBox
            margin: large
            style: inline
            stretchFactor: 1
            children:
                - type: VariableSupplier
                  name: structureSupplier
                  populate: manual
                  persistentItems: true
                  stretchFactor: 1
                  events:
                         change: './test.events::onChange_structureSupplier'
                         update: './test.events::onUpdate_structureSupplier'
                  children:
                         - type: TargetLayoutBox
                           label: Select Variable-Cluster pairs
                           children:
                              - type: VariablesListBox
                                showColumnHeaders: true
                                name: structure
                                fullRowSelect: true
                                isTarget: true
                                events:
                                     change: './test.events::onChange_structure'
                                columns:
                                      - name: variable
                                        stretchFactor: 1
                                        template:
                                            type: VariableLabel
                                      - name: cluster
                                        stretchFactor: 1
                                        template:
                                            type: VariableLabel



  - type: LayoutBox
    margin: large
    children:
      - type: Output
        name: output
